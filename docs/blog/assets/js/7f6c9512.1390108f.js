"use strict";(self.webpackChunksea_ql_blog=self.webpackChunksea_ql_blog||[]).push([[9570],{5680:(a,e,t)=>{t.d(e,{xA:()=>c,yg:()=>v});var r=t(6540);function n(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}function o(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),t.push.apply(t,r)}return t}function s(a){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?o(Object(t),!0).forEach((function(e){n(a,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(t,e))}))}return a}function l(a,e){if(null==a)return{};var t,r,n=function(a,e){if(null==a)return{};var t,r,n={},o=Object.keys(a);for(r=0;r<o.length;r++)t=o[r],e.indexOf(t)>=0||(n[t]=a[t]);return n}(a,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);for(r=0;r<o.length;r++)t=o[r],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(a,t)&&(n[t]=a[t])}return n}var i=r.createContext({}),g=function(a){var e=r.useContext(i),t=e;return a&&(t="function"==typeof a?a(e):s(s({},e),a)),t},c=function(a){var e=g(a.components);return r.createElement(i.Provider,{value:e},a.children)},m="mdxType",u={inlineCode:"code",wrapper:function(a){var e=a.children;return r.createElement(r.Fragment,{},e)}},p=r.forwardRef((function(a,e){var t=a.components,n=a.mdxType,o=a.originalType,i=a.parentName,c=l(a,["components","mdxType","originalType","parentName"]),m=g(t),p=n,v=m["".concat(i,".").concat(p)]||m[p]||u[p]||o;return t?r.createElement(v,s(s({ref:e},c),{},{components:t})):r.createElement(v,s({ref:e},c))}));function v(a,e){var t=arguments,n=e&&e.mdxType;if("string"==typeof a||n){var o=t.length,s=new Array(o);s[0]=p;var l={};for(var i in e)hasOwnProperty.call(e,i)&&(l[i]=e[i]);l.originalType=a,l[m]="string"==typeof a?a:n,s[1]=l;for(var g=2;g<o;g++)s[g]=t[g];return r.createElement.apply(null,s)}return r.createElement.apply(null,t)}p.displayName="MDXCreateElement"},2741:(a,e,t)=>{t.r(e),t.d(e,{assets:()=>i,contentTitle:()=>s,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>g});var r=t(8168),n=(t(6540),t(5680));const o={slug:"2021-11-19-whats-new-in-0.4.0",title:"SeaORM 0.4.0 \u4e2d\u7684\u65b0\u7279\u6027",author:"SeaQL Team",author_title:"Chris Tsang",author_url:"https://github.com/SeaQL",author_image_url:"https://www.sea-ql.org/SeaORM/img/SeaQL.png",tags:["news"]},s=void 0,l={permalink:"/blog/2021-11-19-whats-new-in-0.4.0",editUrl:"https://github.com/SeaQL/seaql.github.io/edit/master/Blog/blog/2021-11-19-whats-new-in-0.4.0.md",source:"@site/blog/2021-11-19-whats-new-in-0.4.0.md",title:"SeaORM 0.4.0 \u4e2d\u7684\u65b0\u7279\u6027",description:"\ud83c\udf89 \u6211\u4eec\u5f88\u9ad8\u5174\u4eca\u5929\u53d1\u5e03 SeaORM 0.4.0\uff01\u4ee5\u4e0b\u662f\u4e00\u4e9b\u529f\u80fd\u4eae\u70b9 \ud83c\udf1f\uff1a",date:"2021-11-19T00:00:00.000Z",formattedDate:"November 19, 2021",tags:[{label:"news",permalink:"/blog/tags/news"}],readingTime:3.725,hasTruncateMarker:!1,authors:[{name:"SeaQL Team",title:"Chris Tsang",url:"https://github.com/SeaQL",imageURL:"https://www.sea-ql.org/SeaORM/img/SeaQL.png"}],frontMatter:{slug:"2021-11-19-whats-new-in-0.4.0",title:"SeaORM 0.4.0 \u4e2d\u7684\u65b0\u7279\u6027",author:"SeaQL Team",author_title:"Chris Tsang",author_url:"https://github.com/SeaQL",author_image_url:"https://www.sea-ql.org/SeaORM/img/SeaQL.png",tags:["news"]},prevItem:{title:"SeaORM 0.5.0 \u66f4\u65b0\u5185\u5bb9",permalink:"/blog/2022-01-01-whats-new-in-0.5.0"},nextItem:{title:"SeaORM 0.3.0 \u65b0\u7279\u6027",permalink:"/blog/2021-10-15-whats-new-in-0.3.0"}},i={authorsImageUrls:[void 0]},g=[{value:"Rust \u7248\u672c 2021",id:"rust-\u7248\u672c-2021",level:2},{value:"\u679a\u4e3e",id:"\u679a\u4e3e",level:2},{value:"\u652f\u6301 PostgreSQL \u7684 <code>RETURNING</code> \u5b50\u53e5",id:"\u652f\u6301-postgresql-\u7684-returning-\u5b50\u53e5",level:2},{value:"Axum \u96c6\u6210\u793a\u4f8b",id:"axum-\u96c6\u6210\u793a\u4f8b",level:2},{value:"\u8d5e\u52a9",id:"\u8d5e\u52a9",level:2},{value:"\u793e\u533a",id:"\u793e\u533a",level:2}],c={toc:g},m="wrapper";function u(a){let{components:e,...t}=a;return(0,n.yg)(m,(0,r.A)({},c,t,{components:e,mdxType:"MDXLayout"}),(0,n.yg)("p",null,"\ud83c\udf89 \u6211\u4eec\u5f88\u9ad8\u5174\u4eca\u5929\u53d1\u5e03 SeaORM ",(0,n.yg)("a",{parentName:"p",href:"https://github.com/SeaQL/sea-orm/releases/tag/0.4.0"},(0,n.yg)("inlineCode",{parentName:"a"},"0.4.0")),"\uff01\u4ee5\u4e0b\u662f\u4e00\u4e9b\u529f\u80fd\u4eae\u70b9 \ud83c\udf1f\uff1a"),(0,n.yg)("h2",{id:"rust-\u7248\u672c-2021"},"Rust \u7248\u672c 2021"),(0,n.yg)("p",null,"[",(0,n.yg)("a",{parentName:"p",href:"https://github.com/SeaQL/sea-orm/pull/273"},"#273"),"] \u5c06 SeaORM \u5347\u7ea7\u5230 ",(0,n.yg)("a",{parentName:"p",href:"https://blog.rust-lang.org/2021/10/21/Rust-1.56.0.html#rust-2021"},"Rust \u7248\u672c 2021")," \ud83e\udd80\u2764\ud83d\udc1a\uff01"),(0,n.yg)("p",null,"\u8d21\u732e\u8005\uff1a"),(0,n.yg)("div",{class:"row"},(0,n.yg)("div",{class:"col col--6 margin-bottom--md"},(0,n.yg)("div",{class:"avatar"},(0,n.yg)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/sno2"},(0,n.yg)("img",{src:"https://avatars.githubusercontent.com/u/43641633?v=4"})),(0,n.yg)("div",{class:"avatar__intro"},(0,n.yg)("div",{class:"avatar__name"},"Carter Snook"))))),(0,n.yg)("h2",{id:"\u679a\u4e3e"},"\u679a\u4e3e"),(0,n.yg)("p",null,"[",(0,n.yg)("a",{parentName:"p",href:"https://github.com/SeaQL/sea-orm/issues/252"},"#252"),"] \u73b0\u5728\u60a8\u53ef\u4ee5\u5728\u6a21\u578b\u4e2d\u4f7f\u7528 Rust \u679a\u4e3e\uff0c\u503c\u53ef\u4ee5\u6620\u5c04\u5230\u6570\u636e\u5e93\u5b57\u7b26\u4e32\u3001\u6574\u6570\u6216\u539f\u751f\u679a\u4e3e\u3002\u4e86\u89e3\u66f4\u591a ",(0,n.yg)("a",{parentName:"p",href:"https://www.sea-ql.org/SeaORM/docs/generate-entity/enumeration"},"here"),"\u3002"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-rust"},'#[derive(Debug, Clone, PartialEq, DeriveEntityModel)]\n#[sea_orm(table_name = "active_enum")]\npub struct Model {\n    #[sea_orm(primary_key)]\n    pub id: i32,\n    // \u5728\u6a21\u578b\u4e2d\u4f7f\u7528\u6211\u4eec\u7684\u81ea\u5b9a\u4e49\u679a\u4e3e\n    pub category: Option<Category>,\n    pub color: Option<Color>,\n    pub tea: Option<Tea>,\n}\n\n#[derive(Debug, Clone, PartialEq, EnumIter, DeriveActiveEnum)]\n#[sea_orm(rs_type = "String", db_type = "String(Some(1))")]\n// \u4e00\u4e2a\u88ab\u5e8f\u5217\u5316\u4e3a\u5b57\u7b26\u4e32\u503c\u7684\u679a\u4e3e\npub enum Category {\n    #[sea_orm(string_value = "B")]\n    Big,\n    #[sea_orm(string_value = "S")]\n    Small,\n}\n\n#[derive(Debug, Clone, PartialEq, EnumIter, DeriveActiveEnum)]\n#[sea_orm(rs_type = "i32", db_type = "Integer")]\n// \u4e00\u4e2a\u88ab\u5e8f\u5217\u5316\u4e3a\u6574\u6570\u503c\u7684\u679a\u4e3e\npub enum Color {\n    #[sea_orm(num_value = 0)]\n    Black,\n    #[sea_orm(num_value = 1)]\n    White,\n}\n\n#[derive(Debug, Clone, PartialEq, EnumIter, DeriveActiveEnum)]\n#[sea_orm(rs_type = "String", db_type = "Enum", enum_name = "tea")]\n// \u4e00\u4e2a\u88ab\u5e8f\u5217\u5316\u4e3a\u6570\u636e\u5e93\u539f\u751f\u679a\u4e3e\u7684\u679a\u4e3e\npub enum Tea {\n    #[sea_orm(string_value = "EverydayTea")]\n    EverydayTea,\n    #[sea_orm(string_value = "BreakfastTea")]\n    BreakfastTea,\n}\n')),(0,n.yg)("div",{class:"row"},(0,n.yg)("div",{class:"col col--6 margin-bottom--md"},"\u8bbe\u8ba1\u8005\uff1a",(0,n.yg)("br",null),(0,n.yg)("br",null),(0,n.yg)("div",{class:"avatar"},(0,n.yg)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/tyt2y3"},(0,n.yg)("img",{src:"https://avatars.githubusercontent.com/u/1782664?v=4"})),(0,n.yg)("div",{class:"avatar__intro"},(0,n.yg)("div",{class:"avatar__name"},"Chris Tsang")))),(0,n.yg)("div",{class:"col col--6 margin-bottom--md"},"\u8d21\u732e\u8005\uff1a",(0,n.yg)("br",null),(0,n.yg)("br",null),(0,n.yg)("div",{class:"avatar"},(0,n.yg)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/billy1624"},(0,n.yg)("img",{src:"https://avatars.githubusercontent.com/u/30400950?v=4"})),(0,n.yg)("div",{class:"avatar__intro"},(0,n.yg)("div",{class:"avatar__name"},"Billy Chan"))))),(0,n.yg)("h2",{id:"\u652f\u6301-postgresql-\u7684-returning-\u5b50\u53e5"},"\u652f\u6301 PostgreSQL \u7684 ",(0,n.yg)("inlineCode",{parentName:"h2"},"RETURNING")," \u5b50\u53e5"),(0,n.yg)("p",null,"[",(0,n.yg)("a",{parentName:"p",href:"https://github.com/SeaQL/sea-orm/issues/183"},"#183"),"] \u5728\u5bf9 PostgreSQL \u7684 ",(0,n.yg)("inlineCode",{parentName:"p"},"ActiveModel")," \u8fdb\u884c\u63d2\u5165\u6216\u66f4\u65b0\u64cd\u4f5c\u65f6\uff0c\u5c06\u4f7f\u7528 ",(0,n.yg)("inlineCode",{parentName:"p"},"RETURNING")," \u5b50\u53e5\u5728\u5355\u4e2a SQL \u8bed\u53e5\u4e2d\u6267\u884c\u9009\u62e9\u3002"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-rust"},'// \u5bf9\u4e8e PostgreSQL\ncake::ActiveModel {\n    name: Set("Apple Pie".to_owned()),\n    ..Default::default()\n}\n.insert(&postgres_db)\n.await?;\n\nassert_eq!(\n    postgres_db.into_transaction_log(),\n    vec![Transaction::from_sql_and_values(\n        DbBackend::Postgres,\n        r#"INSERT INTO "cake" ("name") VALUES ($1) RETURNING "id", "name""#,\n        vec!["Apple Pie".into()]\n    )]);\n')),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-rust"},'// \u5bf9\u4e8e MySQL \u548c SQLite\ncake::ActiveModel {\n    name: Set("Apple Pie".to_owned()),\n    ..Default::default()\n}\n.insert(&other_db)\n.await?;\n\nassert_eq!(\n    other_db.into_transaction_log(),\n    vec![\n        Transaction::from_sql_and_values(\n            DbBackend::MySql,\n            r#"INSERT INTO `cake` (`name`) VALUES (?)"#,\n            vec!["Apple Pie".into()]\n        ),\n        Transaction::from_sql_and_values(\n            DbBackend::MySql,\n            r#"SELECT `cake`.`id`, `cake`.`name` FROM `cake` WHERE `cake`.`id` = ? LIMIT ?"#,\n            vec![15.into(), 1u64.into()]\n        )]);\n')),(0,n.yg)("div",{class:"row"},(0,n.yg)("div",{class:"col col--6 margin-bottom--md"},"\u63d0\u51fa\u7684\u6765\u6e90\uff1a",(0,n.yg)("br",null),(0,n.yg)("br",null),(0,n.yg)("div",{class:"avatar"},(0,n.yg)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/marlon-sousa"},(0,n.yg)("img",{src:"https://avatars.githubusercontent.com/u/21093041?v=4"})),(0,n.yg)("div",{class:"avatar__intro"},(0,n.yg)("div",{class:"avatar__name"},"Marlon Brand\xe3o de Sousa")))),(0,n.yg)("div",{class:"col col--6 margin-bottom--md"},"\u8d21\u732e\u8005\uff1a",(0,n.yg)("br",null),(0,n.yg)("br",null),(0,n.yg)("div",{class:"avatar"},(0,n.yg)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/billy1624"},(0,n.yg)("img",{src:"https://avatars.githubusercontent.com/u/30400950?v=4"})),(0,n.yg)("div",{class:"avatar__intro"},(0,n.yg)("div",{class:"avatar__name"},"Billy Chan"))))),(0,n.yg)("h2",{id:"axum-\u96c6\u6210\u793a\u4f8b"},"Axum \u96c6\u6210\u793a\u4f8b"),(0,n.yg)("p",null,"[",(0,n.yg)("a",{parentName:"p",href:"https://github.com/SeaQL/sea-orm/pull/297"},"#297"),"] \u6dfb\u52a0\u4e86 ",(0,n.yg)("a",{parentName:"p",href:"https://github.com/SeaQL/sea-orm/tree/master/examples/axum_example"},"Axum \u96c6\u6210\u793a\u4f8b"),"\u3002\u66f4\u591a\u793a\u4f8b ",(0,n.yg)("a",{parentName:"p",href:"https://github.com/SeaQL/sea-orm/issues/269"},"\u9700\u8981"),"\uff01"),(0,n.yg)("p",null,"\u8d21\u732e\u8005\uff1a"),(0,n.yg)("div",{class:"row"},(0,n.yg)("div",{class:"col col--6 margin-bottom--md"},(0,n.yg)("div",{class:"avatar"},(0,n.yg)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/YoshieraHuang"},(0,n.yg)("img",{src:"https://avatars.githubusercontent.com/u/38752027?v=4"})),(0,n.yg)("div",{class:"avatar__intro"},(0,n.yg)("div",{class:"avatar__name"},"Yoshiera"))))),(0,n.yg)("h2",{id:"\u8d5e\u52a9"},"\u8d5e\u52a9"),(0,n.yg)("p",null,"\u6211\u4eec\u7684 ",(0,n.yg)("a",{parentName:"p",href:"https://github.com/sponsors/SeaQL"},"GitHub Sponsorship")," \u9875\u9762\u5df2\u4e0a\u7ebf\uff01\u5982\u679c\u60a8\u613f\u610f\uff0c\u60a8\u7684\u5c0f\u989d\u6350\u6b3e\u5c06\u4e0d\u80dc\u611f\u6fc0\u3002"),(0,n.yg)("p",null,"\u5411\u6211\u4eec\u7684\u9996\u4f4d\u8d5e\u52a9\u8005\u4eec\u81f4\u4ee5\u8bda\u631a\u7684\u611f\u8c22 \ud83d\ude07\uff1a"),(0,n.yg)("div",{class:"row"},(0,n.yg)("div",{class:"col col--6 margin-bottom--md"},(0,n.yg)("div",{class:"avatar"},(0,n.yg)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/shanesveller"},(0,n.yg)("img",{src:"https://avatars.githubusercontent.com/u/831?v=4"})),(0,n.yg)("div",{class:"avatar__intro"},(0,n.yg)("div",{class:"avatar__name"},"Shane Sveller")))),(0,n.yg)("div",{class:"col col--6 margin-bottom--md"},(0,n.yg)("div",{class:"avatar"},(0,n.yg)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/exzachlyvv"},(0,n.yg)("img",{src:"https://avatars.githubusercontent.com/u/46034847?v=4"})),(0,n.yg)("div",{class:"avatar__intro"},(0,n.yg)("div",{class:"avatar__name"},"Zachary Vander Velden")))),(0,n.yg)("div",{class:"col col--6 margin-bottom--md"},(0,n.yg)("div",{class:"avatar"},(0,n.yg)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm"},(0,n.yg)("img",{style:{width:"100%"},src:"data:image/gif;base64,R0lGODlhAQABAIAAAMLCwgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw=="})),(0,n.yg)("div",{class:"avatar__intro"},(0,n.yg)("div",{class:"avatar__name"},"\u65e0\u540d\u8d5e\u52a9\u8005"))))),(0,n.yg)("h2",{id:"\u793e\u533a"},"\u793e\u533a"),(0,n.yg)("p",null,"SeaQL \u662f\u4e00\u4e2a\u7531\u793e\u533a\u9a71\u52a8\u7684\u9879\u76ee\u3002\u6211\u4eec\u6b22\u8fce\u60a8\u53c2\u4e0e\uff0c\u8d21\u732e\uff0c\u4e00\u8d77\u4e3a Rust \u7684\u672a\u6765\u800c\u52aa\u529b\u3002"),(0,n.yg)("p",null,"\u4ee5\u4e0b\u662f SeaORM ",(0,n.yg)("a",{parentName:"p",href:"https://github.com/SeaQL/sea-orm/milestone/5"},(0,n.yg)("inlineCode",{parentName:"a"},"0.5.x"))," \u7684\u8def\u7ebf\u56fe\u3002"))}u.isMDXComponent=!0}}]);