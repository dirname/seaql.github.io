"use strict";(self.webpackChunksea_ql_blog=self.webpackChunksea_ql_blog||[]).push([[3528],{5680:(a,t,e)=>{e.d(t,{xA:()=>g,yg:()=>u});var r=e(6540);function n(a,t,e){return t in a?Object.defineProperty(a,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[t]=e,a}function o(a,t){var e=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),e.push.apply(e,r)}return e}function s(a){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?o(Object(e),!0).forEach((function(t){n(a,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(e)):o(Object(e)).forEach((function(t){Object.defineProperty(a,t,Object.getOwnPropertyDescriptor(e,t))}))}return a}function i(a,t){if(null==a)return{};var e,r,n=function(a,t){if(null==a)return{};var e,r,n={},o=Object.keys(a);for(r=0;r<o.length;r++)e=o[r],t.indexOf(e)>=0||(n[e]=a[e]);return n}(a,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);for(r=0;r<o.length;r++)e=o[r],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(a,e)&&(n[e]=a[e])}return n}var l=r.createContext({}),c=function(a){var t=r.useContext(l),e=t;return a&&(e="function"==typeof a?a(t):s(s({},t),a)),e},g=function(a){var t=c(a.components);return r.createElement(l.Provider,{value:t},a.children)},v="mdxType",p={inlineCode:"code",wrapper:function(a){var t=a.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(a,t){var e=a.components,n=a.mdxType,o=a.originalType,l=a.parentName,g=i(a,["components","mdxType","originalType","parentName"]),v=c(e),m=n,u=v["".concat(l,".").concat(m)]||v[m]||p[m]||o;return e?r.createElement(u,s(s({ref:t},g),{},{components:e})):r.createElement(u,s({ref:t},g))}));function u(a,t){var e=arguments,n=t&&t.mdxType;if("string"==typeof a||n){var o=e.length,s=new Array(o);s[0]=m;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=a,i[v]="string"==typeof a?a:n,s[1]=i;for(var c=2;c<o;c++)s[c]=e[c];return r.createElement.apply(null,s)}return r.createElement.apply(null,e)}m.displayName="MDXCreateElement"},4540:(a,t,e)=>{e.r(t),e.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>c});var r=e(8168),n=(e(6540),e(5680));const o={slug:"2021-09-20-introducing-sea-orm",title:"\u4ecb\u7ecd SeaORM \ud83d\udc1a",author:"Chris Tsang",author_title:"SeaQL \u56e2\u961f",author_url:"https://github.com/tyt2y3",author_image_url:"https://avatars.githubusercontent.com/u/1782664?v=4",tags:["news"]},s=void 0,i={permalink:"/blog/2021-09-20-introducing-sea-orm",editUrl:"https://github.com/SeaQL/seaql.github.io/edit/master/Blog/blog/2021-09-20-introducing-sea-orm.md",source:"@site/blog/2021-09-20-introducing-sea-orm.md",title:"\u4ecb\u7ecd SeaORM \ud83d\udc1a",description:"\u6211\u4eec\u5f88\u9ad8\u5174\u4eca\u5929\u5411 Rust \u793e\u533a\u4ecb\u7ecd SeaORM 0.2.2\u3002\u81ea 0.1.0 \u4ee5\u6765\uff0c\u6211\u4eec\u5f88\u9ad8\u5174\u6536\u5230\u4e86\u6765\u81ea\u4f18\u79c0\u7684\u5f00\u53d1\u8005\u5bf9 SeaQuery \u548c SeaORM \u7684\u53cd\u9988\u548c\u8d21\u732e\u3002",date:"2021-09-20T00:00:00.000Z",formattedDate:"September 20, 2021",tags:[{label:"news",permalink:"/blog/tags/news"}],readingTime:4.875,hasTruncateMarker:!1,authors:[{name:"Chris Tsang",title:"SeaQL \u56e2\u961f",url:"https://github.com/tyt2y3",imageURL:"https://avatars.githubusercontent.com/u/1782664?v=4"}],frontMatter:{slug:"2021-09-20-introducing-sea-orm",title:"\u4ecb\u7ecd SeaORM \ud83d\udc1a",author:"Chris Tsang",author_title:"SeaQL \u56e2\u961f",author_url:"https://github.com/tyt2y3",author_image_url:"https://avatars.githubusercontent.com/u/1782664?v=4",tags:["news"]},prevItem:{title:"SeaORM 0.2.4 \u65b0\u7279\u6027",permalink:"/blog/2021-10-01-whats-new-in-0.2.4"},nextItem:{title:"\u53d1\u5e03\u6a21\u578b",permalink:"/blog/2021-08-30-release-model"}},l={authorsImageUrls:[void 0]},c=[{value:"\u5f02\u6b65",id:"\u5f02\u6b65",level:2},{value:"\u52a8\u6001",id:"\u52a8\u6001",level:2},{value:"\u53ef\u6d4b\u8bd5",id:"\u53ef\u6d4b\u8bd5",level:2},{value:"\u9762\u5411\u670d\u52a1",id:"\u9762\u5411\u670d\u52a1",level:2},{value:"\u4eba\u5458",id:"\u4eba\u5458",level:2},{value:"\u6838\u5fc3\u6210\u5458",id:"\u6838\u5fc3\u6210\u5458",level:3},{value:"\u8d21\u732e\u8005",id:"\u8d21\u732e\u8005",level:3}],g={toc:c},v="wrapper";function p(a){let{components:t,...e}=a;return(0,n.yg)(v,(0,r.A)({},g,e,{components:t,mdxType:"MDXLayout"}),(0,n.yg)("p",null,"\u6211\u4eec\u5f88\u9ad8\u5174\u4eca\u5929\u5411 Rust \u793e\u533a\u4ecb\u7ecd SeaORM ",(0,n.yg)("a",{parentName:"p",href:"https://github.com/SeaQL/sea-orm/releases/tag/0.2.2"},(0,n.yg)("inlineCode",{parentName:"a"},"0.2.2")),"\u3002\u81ea ",(0,n.yg)("inlineCode",{parentName:"p"},"0.1.0")," \u4ee5\u6765\uff0c\u6211\u4eec\u5f88\u9ad8\u5174\u6536\u5230\u4e86\u6765\u81ea\u4f18\u79c0\u7684\u5f00\u53d1\u8005\u5bf9 SeaQuery \u548c SeaORM \u7684\u53cd\u9988\u548c\u8d21\u732e\u3002"),(0,n.yg)("p",null,"Rust \u662f\u4e00\u95e8\u53ef\u4ee5\u7528\u6765\u6784\u5efa\u4efb\u4f55\u4e1c\u897f\u7684\u4f18\u79c0\u8bed\u8a00\u3002\u5e38\u89c1\u7684\u95ee\u7b54\u4e4b\u4e00\u662f \u201c\u6211\u4eec\u662f\u5426\u5df2\u7ecf\u6709 Web\uff1f\u201d \u5982\u679c\u8bf4 Rocket\uff08\u6216\u60a8\u559c\u6b22\u7684\u4efb\u4f55 Web \u6846\u67b6\uff09\u662f Rust \u7684 Rails\uff0c\u90a3\u4e48 SeaORM \u5c31\u662f Rust \u7684 ActiveRecord\u3002"),(0,n.yg)("p",null,"SeaORM \u662f\u4e00\u4e2a\u4ece\u96f6\u5f00\u59cb\u6784\u5efa\u7684\u5f02\u6b65 ORM\uff0c\u65e8\u5728\u4e0e\u5f02\u6b65\u751f\u6001\u7cfb\u7edf\u826f\u597d\u534f\u4f5c\uff0c\u65e0\u8bba\u662f actix\u3001async-std\u3001tokio \u8fd8\u662f\u4efb\u4f55\u57fa\u4e8e\u8fd9\u4e9b\u4e4b\u4e0a\u7684 Web \u6846\u67b6\u3002"),(0,n.yg)("p",null,"\u8ba9\u6211\u4eec\u5feb\u901f\u4e86\u89e3\u4e00\u4e0b SeaORM\u3002"),(0,n.yg)("h2",{id:"\u5f02\u6b65"},"\u5f02\u6b65"),(0,n.yg)("p",null,"\u4ee5\u4e0b\u662f\u5982\u4f55\u5e76\u884c\u6267\u884c\u591a\u4e2a\u67e5\u8be2\uff1a"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-rust"},"// \u5e76\u884c\u6267\u884c\u591a\u4e2a\u67e5\u8be2\nlet cakes_and_fruits: (Vec<cake::Model>, Vec<fruit::Model>) =\n    futures::try_join!(Cake::find().all(&db), Fruit::find().all(&db))?;\n")),(0,n.yg)("h2",{id:"\u52a8\u6001"},"\u52a8\u6001"),(0,n.yg)("p",null,"\u60a8\u53ef\u4ee5\u4f7f\u7528 SeaQuery \u6784\u5efa\u590d\u6742\u7684\u67e5\u8be2\u800c\u65e0\u9700\u4e0e ORM \u62b5\u6297\uff1a"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-rust"},"// \u8f7b\u677e\u6784\u5efa\u5b50\u67e5\u8be2\nlet cakes_with_filling: Vec<cake::Model> = cake::Entity::find()\n    .filter(\n        Condition::any().add(\n            cake::Column::Id.in_subquery(\n                Query::select()\n                    .column(cake_filling::Column::CakeId)\n                    .from(cake_filling::Entity)\n                    .to_owned(),\n            ),\n        ),\n    )\n    .all(&db)\n    .await?;\n")),(0,n.yg)("p",null,(0,n.yg)("a",{parentName:"p",href:"https://docs.rs/sea-query/*/sea_query/"},"\u66f4\u591a\u5173\u4e8e SeaQuery \u7684\u5185\u5bb9")),(0,n.yg)("h2",{id:"\u53ef\u6d4b\u8bd5"},"\u53ef\u6d4b\u8bd5"),(0,n.yg)("p",null,"\u8981\u7f16\u5199\u5355\u5143\u6d4b\u8bd5\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u6211\u4eec\u7684\u6a21\u62df\u63a5\u53e3\uff1a"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-rust"},'// \u8bbe\u7f6e\u6a21\u62df\u8fde\u63a5\nlet db = MockDatabase::new(DbBackend::Postgres)\n    .append_query_results(vec![\n        vec![\n            cake::Model {\n                id: 1,\n                name: "New York Cheese".to_owned(),\n            },\n        ],\n    ])\n    .into_connection();\n\n// \u6267\u884c\u60a8\u7684\u5e94\u7528\u903b\u8f91\nassert_eq!(\n    cake::Entity::find().one(&db).await?,\n    Some(cake::Model {\n        id: 1,\n        name: "New York Cheese".to_owned(),\n    })\n);\n\n// \u4e0e\u9884\u671f\u7684\u4e8b\u52a1\u65e5\u5fd7\u8fdb\u884c\u6bd4\u8f83\nassert_eq!(\n    db.into_transaction_log(),\n    vec![\n        Transaction::from_sql_and_values(\n            DbBackend::Postgres,\n            r#"SELECT "cake"."id", "cake"."name" FROM "cake" LIMIT $1"#,\n            vec![1u64.into()]\n        ),\n    ]\n);\n')),(0,n.yg)("p",null,(0,n.yg)("a",{parentName:"p",href:"https://www.sea-ql.org/SeaORM/docs/write-test/mock"},"\u66f4\u591a\u5173\u4e8e\u6d4b\u8bd5\u7684\u4fe1\u606f")),(0,n.yg)("h2",{id:"\u9762\u5411\u670d\u52a1"},"\u9762\u5411\u670d\u52a1"),(0,n.yg)("p",null,"\u8fd9\u662f\u4e00\u4e2a\u5e26\u6709\u5206\u9875\u7684 ",(0,n.yg)("inlineCode",{parentName:"p"},"Rocket")," \u5904\u7406\u7a0b\u5e8f\u793a\u4f8b\uff1a"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-rust"},'#[get("/?<page>&<posts_per_page>")]\nasync fn list(\n    conn: Connection<Db>,\n    page: Option<usize>,\n    per_page: Option<usize>,\n) -> Template {\n    // \u8bbe\u7f6e\u9875\u9762\u7f16\u53f7\u548c\u6bcf\u9875\u9879\u76ee\n    let page = page.unwrap_or(1);\n    let per_page = per_page.unwrap_or(10);\n\n    // \u8bbe\u7f6e\u5206\u9875\u5668\n    let paginator = Post::find()\n        .order_by_asc(post::Column::Id)\n        .paginate(&conn, per_page);\n    let num_pages = paginator.num_pages().await.unwrap();\n\n    // \u83b7\u53d6\u5206\u9875\u7684\u5e16\u5b50\n    let posts = paginator\n        .fetch_page(page - 1)\n        .await\n        .expect("\u65e0\u6cd5\u83b7\u53d6\u5e16\u5b50");\n\n    Template::render(\n        "index",\n        context! {\n            page: page,\n            per_page: per_page,\n            posts: posts,\n            num_pages: num_pages,\n        },\n    )\n}\n')),(0,n.yg)("p",null,(0,n.yg)("a",{parentName:"p",href:"https://github.com/SeaQL/sea-orm/tree/master/examples/rocket_example"},"\u5b8c\u6574\u7684 Rocket \u793a\u4f8b")),(0,n.yg)("p",null,"\u6211\u4eec\u4e5f\u6b63\u5728\u4e3a\u5176\u4ed6 Web \u6846\u67b6\u6784\u5efa\u66f4\u591a\u793a\u4f8b\u3002"),(0,n.yg)("h2",{id:"\u4eba\u5458"},"\u4eba\u5458"),(0,n.yg)("p",null,"SeaQL \u662f\u4e00\u4e2a\u4ee5\u793e\u533a\u4e3a\u9a71\u52a8\u7684\u9879\u76ee\u3002\u6211\u4eec\u6b22\u8fce\u60a8\u53c2\u4e0e\u3001\u8d21\u732e\uff0c\u5171\u540c\u4e3a Rust \u7684\u672a\u6765\u52aa\u529b\u3002"),(0,n.yg)("h3",{id:"\u6838\u5fc3\u6210\u5458"},"\u6838\u5fc3\u6210\u5458"),(0,n.yg)("div",{class:"container"},(0,n.yg)("div",{class:"row"},(0,n.yg)("div",{class:"col col--3 margin-bottom--md"},(0,n.yg)("div",{class:"avatar"},(0,n.yg)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/tyt2y3"},(0,n.yg)("img",{src:"https://avatars.githubusercontent.com/u/1782664?v=4"})),(0,n.yg)("div",{class:"avatar__intro"},(0,n.yg)("div",{class:"avatar__name"},"Chris Tsang")))),(0,n.yg)("div",{class:"col col--3 margin-bottom--md"},(0,n.yg)("div",{class:"avatar"},(0,n.yg)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/billy1624"},(0,n.yg)("img",{src:"https://avatars.githubusercontent.com/u/30400950?v=4"})),(0,n.yg)("div",{class:"avatar__intro"},(0,n.yg)("div",{class:"avatar__name"},"Billy Chan")))))),(0,n.yg)("h3",{id:"\u8d21\u732e\u8005"},"\u8d21\u732e\u8005"),(0,n.yg)("p",null,"\u4f5c\u4e3a\u793c\u8c8c\uff0c\u8fd9\u91cc\u5217\u51fa\u4e86 SeaQL \u7684\u65e9\u671f\u8d21\u732e\u8005\uff08\u6309\u5b57\u6bcd\u987a\u5e8f\uff09\uff1a"),(0,n.yg)("div",{class:"container"},(0,n.yg)("div",{class:"row"},(0,n.yg)("div",{class:"col col--3 margin-bottom--md"},(0,n.yg)("div",{class:"avatar"},(0,n.yg)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/Acidic9"},(0,n.yg)("img",{src:"https://avatars.githubusercontent.com/u/16362377?v=4"})),(0,n.yg)("div",{class:"avatar__intro"},(0,n.yg)("div",{class:"avatar__name"},"Ari Seyhun")))),(0,n.yg)("div",{class:"col col--3 margin-bottom--md"},(0,n.yg)("div",{class:"avatar"},(0,n.yg)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/MozarellaMan"},(0,n.yg)("img",{src:"https://avatars.githubusercontent.com/u/48062697?v=4"})),(0,n.yg)("div",{class:"avatar__intro"},(0,n.yg)("div",{class:"avatar__name"},"Ayomide Bamidele")))),(0,n.yg)("div",{class:"col col--3 margin-bottom--md"},(0,n.yg)("div",{class:"avatar"},(0,n.yg)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/benarmstead"},(0,n.yg)("img",{src:"https://avatars.githubusercontent.com/u/70973680?v=4"})),(0,n.yg)("div",{class:"avatar__intro"},(0,n.yg)("div",{class:"avatar__name"},"Ben Armstead")))),(0,n.yg)("div",{class:"col col--3 margin-bottom--md"},(0,n.yg)("div",{class:"avatar"},(0,n.yg)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/bobbyng626"},(0,n.yg)("img",{src:"https://avatars.githubusercontent.com/u/67236456?v=4"})),(0,n.yg)("div",{class:"avatar__intro"},(0,n.yg)("div",{class:"avatar__name"},"Bobby Ng")))),(0,n.yg)("div",{class:"col col--3 margin-bottom--md"},(0,n.yg)("div",{class:"avatar"},(0,n.yg)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/scrblue"},(0,n.yg)("img",{src:"https://avatars.githubusercontent.com/u/1524936?v=4"})),(0,n.yg)("div",{class:"avatar__intro"},(0,n.yg)("div",{class:"avatar__name"},"Daniel Lyne")))),(0,n.yg)("div",{class:"col col--3 margin-bottom--md"},(0,n.yg)("div",{class:"avatar"},(0,n.yg)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/Hirtol"},(0,n.yg)("img",{src:"https://avatars.githubusercontent.com/u/55356909?v=4"})),(0,n.yg)("div",{class:"avatar__intro"},(0,n.yg)("div",{class:"avatar__name"},"Hirtol")))),(0,n.yg)("div",{class:"col col--3 margin-bottom--md"},(0,n.yg)("div",{class:"avatar"},(0,n.yg)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/Follpvosten"},(0,n.yg)("img",{src:"https://avatars.githubusercontent.com/u/22855787?v=4"})),(0,n.yg)("div",{class:"avatar__intro"},(0,n.yg)("div",{class:"avatar__name"},"Sylvie Rinner")))),(0,n.yg)("div",{class:"col col--3 margin-bottom--md"},(0,n.yg)("div",{class:"avatar"},(0,n.yg)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/nappa85"},(0,n.yg)("img",{src:"https://avatars.githubusercontent.com/u/7566389?v=4"})),(0,n.yg)("div",{class:"avatar__intro"},(0,n.yg)("div",{class:"avatar__name"},"Marco Napetti")))),(0,n.yg)("div",{class:"col col--3 margin-bottom--md"},(0,n.yg)("div",{class:"avatar"},(0,n.yg)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/code-mm"},(0,n.yg)("img",{src:"https://avatars.githubusercontent.com/u/43041831?v=4"})),(0,n.yg)("div",{class:"avatar__intro"},(0,n.yg)("div",{class:"avatar__name"},"Markus Merklinger")))),(0,n.yg)("div",{class:"col col--3 margin-bottom--md"},(0,n.yg)("div",{class:"avatar"},(0,n.yg)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/MuhannadAlrusayni"},(0,n.yg)("img",{src:"https://avatars.githubusercontent.com/u/14802524?v=4"})),(0,n.yg)("div",{class:"avatar__intro"},(0,n.yg)("div",{class:"avatar__name"},"Muhannad")))),(0,n.yg)("div",{class:"col col--3 margin-bottom--md"},(0,n.yg)("div",{class:"avatar"},(0,n.yg)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/nitnelave"},(0,n.yg)("img",{src:"https://avatars.githubusercontent.com/u/796633?v=4"})),(0,n.yg)("div",{class:"avatar__intro"},(0,n.yg)("div",{class:"avatar__name"},"nitnelave")))),(0,n.yg)("div",{class:"col col--3 margin-bottom--md"},(0,n.yg)("div",{class:"avatar"},(0,n.yg)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/duchainer"},(0,n.yg)("img",{src:"https://avatars.githubusercontent.com/u/11084784?v=4"})),(0,n.yg)("div",{class:"avatar__intro"},(0,n.yg)("div",{class:"avatar__name"},"Rapha\xebl Ducha\xeene")))),(0,n.yg)("div",{class:"col col--3 margin-bottom--md"},(0,n.yg)("div",{class:"avatar"},(0,n.yg)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/RemiKalbe"},(0,n.yg)("img",{src:"https://avatars.githubusercontent.com/u/8604600?v=4"})),(0,n.yg)("div",{class:"avatar__intro"},(0,n.yg)("div",{class:"avatar__name"},"R\xe9mi Kalbe")))),(0,n.yg)("div",{class:"col col--3 margin-bottom--md"},(0,n.yg)("div",{class:"avatar"},(0,n.yg)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/samsamai"},(0,n.yg)("img",{src:"https://avatars.githubusercontent.com/u/3764355?v=4"})),(0,n.yg)("div",{class:"avatar__intro"},(0,n.yg)("div",{class:"avatar__name"},"Sam Samai")))))))}p.isMDXComponent=!0}}]);