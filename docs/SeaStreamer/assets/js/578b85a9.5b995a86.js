"use strict";(self.webpackChunksea_orm=self.webpackChunksea_orm||[]).push([[2605],{5680:(e,r,a)=>{a.d(r,{xA:()=>i,yg:()=>d});var t=a(6540);function n(e,r,a){return r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function o(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),a.push.apply(a,t)}return a}function l(e){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?o(Object(a),!0).forEach((function(r){n(e,r,a[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))}))}return e}function s(e,r){if(null==e)return{};var a,t,n=function(e,r){if(null==e)return{};var a,t,n={},o=Object.keys(e);for(t=0;t<o.length;t++)a=o[t],r.indexOf(a)>=0||(n[a]=e[a]);return n}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)a=o[t],r.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var c=t.createContext({}),p=function(e){var r=t.useContext(c),a=r;return e&&(a="function"==typeof e?e(r):l(l({},r),e)),a},i=function(e){var r=p(e.components);return t.createElement(c.Provider,{value:r},e.children)},u="mdxType",y={inlineCode:"code",wrapper:function(e){var r=e.children;return t.createElement(t.Fragment,{},r)}},g=t.forwardRef((function(e,r){var a=e.components,n=e.mdxType,o=e.originalType,c=e.parentName,i=s(e,["components","mdxType","originalType","parentName"]),u=p(a),g=n,d=u["".concat(c,".").concat(g)]||u[g]||y[g]||o;return a?t.createElement(d,l(l({ref:r},i),{},{components:a})):t.createElement(d,l({ref:r},i))}));function d(e,r){var a=arguments,n=r&&r.mdxType;if("string"==typeof e||n){var o=a.length,l=new Array(o);l[0]=g;var s={};for(var c in r)hasOwnProperty.call(r,c)&&(s[c]=r[c]);s.originalType=e,s[u]="string"==typeof e?e:n,l[1]=s;for(var p=2;p<o;p++)l[p]=a[p];return t.createElement.apply(null,l)}return t.createElement.apply(null,a)}g.displayName="MDXCreateElement"},9903:(e,r,a)=>{a.r(r),a.d(r,{assets:()=>c,contentTitle:()=>l,default:()=>y,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var t=a(8168),n=(a(6540),a(5680));const o={},l="\u8fdb\u7a0b\u95f4\u901a\u4fe1",s={unversionedId:"processors/inter-process",id:"processors/inter-process",title:"\u8fdb\u7a0b\u95f4\u901a\u4fe1",description:"SeaStreamer \u9f13\u52b1\u60a8\u7f16\u5199\u5c0f\u578b\u6d41\u5904\u7406\u5668\u5e76\u5c06\u5b83\u4eec\u8fde\u63a5\u8d77\u6765\uff0c\u800c\u4e0d\u662f\u521b\u5efa\u4e00\u4e2a\u5305\u542b\u8bb8\u591a\u9009\u9879\u7684\u5de8\u5927\u5904\u7406\u5668\u3002",source:"@site/docs/04-processors/01-inter-process.md",sourceDirName:"04-processors",slug:"/processors/inter-process",permalink:"/SeaStreamer/docs/next/processors/inter-process",draft:!1,editUrl:"https://github.com/SeaQL/seaql.github.io/edit/master/SeaStreamer/docs/04-processors/01-inter-process.md",tags:[],version:"current",lastUpdatedBy:"Chris Tsang",lastUpdatedAt:1692042392,formattedLastUpdatedAt:"Aug 14, 2023",sidebarPosition:1,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Consumer",permalink:"/SeaStreamer/docs/next/streamer/consumer"},next:{title:"\u8fdb\u7a0b\u5185",permalink:"/SeaStreamer/docs/next/processors/intra-process"}},c={},p=[{value:"\u5c1d\u8bd5",id:"\u5c1d\u8bd5",level:2},{value:"Stdio \u6d88\u606f\u683c\u5f0f",id:"stdio-\u6d88\u606f\u683c\u5f0f",level:2}],i={toc:p},u="wrapper";function y(e){let{components:r,...a}=e;return(0,n.yg)(u,(0,t.A)({},i,a,{components:r,mdxType:"MDXLayout"}),(0,n.yg)("h1",{id:"\u8fdb\u7a0b\u95f4\u901a\u4fe1"},"\u8fdb\u7a0b\u95f4\u901a\u4fe1"),(0,n.yg)("p",null,"SeaStreamer \u9f13\u52b1\u60a8\u7f16\u5199\u5c0f\u578b\u6d41\u5904\u7406\u5668\u5e76\u5c06\u5b83\u4eec\u8fde\u63a5\u8d77\u6765\uff0c\u800c\u4e0d\u662f\u521b\u5efa\u4e00\u4e2a\u5305\u542b\u8bb8\u591a\u9009\u9879\u7684\u5de8\u5927\u5904\u7406\u5668\u3002"),(0,n.yg)("p",null,"Unix \u7ba1\u9053\u662f\u4e00\u4e2a\u4f1f\u5927\u7684\u53d1\u660e\uff0c\u5b83\u901a\u8fc7\u5728 shell \u4e2d\u7ec4\u5408\u7a0b\u5e8f\u4f7f\u4efb\u4f55\u4eba\u90fd\u80fd\u6210\u4e3a\u6587\u672c\u5904\u7406\u7684\u9ad8\u624b\uff01"),(0,n.yg)("p",null,"\u5982\u679c\u6211\u4eec\u4e5f\u53ef\u4ee5\u4ee5\u540c\u6837\u7684\u65b9\u5f0f\u5904\u7406\u4e8b\u4ef6\u6d41\u5462\uff1f"),(0,n.yg)("p",null,"\u4f7f\u7528 SeaStreamer\uff0c\u60a8\u53ef\u4ee5\u7528\u7ba1\u9053\u5c06\u5904\u7406\u5668\u8fde\u63a5\u5728\u4e00\u8d77\uff1a"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-shell"},"processor_a | processor_b\n")),(0,n.yg)("p",null,"\u60a8\u8fd8\u53ef\u4ee5\u7528\u6587\u4ef6\u5f02\u6b65\u8fde\u63a5\u5b83\u4eec\uff1a"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-shell"},"touch stream # \u521b\u5efa\u4e00\u4e2a\u7a7a\u6587\u4ef6\ntail -f stream | processor_b # \u7a0b\u5e8f b \u53ef\u4ee5\u968f\u65f6\u542f\u52a8\nprocessor_a >> stream # \u9644\u52a0\u5230\u6587\u4ef6\n")),(0,n.yg)("p",null,"\u6216\u8005\u4f7f\u7528\u6587\u4ef6\u540e\u7aef\uff1a"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-shell"},"file=/tmp/sea-streamer-$(date +%s)\ntouch $file\nprocessor_a --output file://$file\nprocessor_b --input  file://$file\n")),(0,n.yg)("h2",{id:"\u5c1d\u8bd5"},"\u5c1d\u8bd5"),(0,n.yg)("p",null,"\u63d0\u4f9b\u4e86\u4e00\u5c0f\u90e8\u5206 CLI \u7a0b\u5e8f\u7528\u4e8e\u6f14\u793a\u3002\u8ba9\u6211\u4eec\u5148\u8bbe\u7f6e\u5b83\u4eec\uff1a"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-shell"},"# `clock` \u7a0b\u5e8f\u751f\u6210\u683c\u5f0f\u4e3a `{ \"tick\": N }` \u7684\u6d88\u606f\nalias clock='cargo run --package sea-streamer-stdio  --features=executables --bin clock'\n# `relay` \u7a0b\u5e8f\u5c06\u6d88\u606f\u4ece `input` \u91cd\u5b9a\u5411\u5230 `output`\nalias relay='cargo run --package sea-streamer-socket --features=executables,backend-kafka,backend-redis --bin relay'\n")),(0,n.yg)("p",null,"\u4ee5\u4e0b\u662f\u5982\u4f55\u4ece Stdio \u27a1\ufe0f Redis / Kafka \u8fdb\u884c\u6d41\u5904\u7406\u7684\u793a\u4f8b\u3002\u6211\u4eec\u4f7f\u7528 ",(0,n.yg)("inlineCode",{parentName:"p"},"clock")," \u751f\u6210\u6d88\u606f\uff0c\u7136\u540e\u5c06\u5176\u7ba1\u9053\u4f20\u8f93\u5230 ",(0,n.yg)("inlineCode",{parentName:"p"},"relay"),"\uff0c\u518d\u5c06\u5176\u6d41\u5411 Redis / Kafka\uff1a"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-shell"},"# Stdio -> Redis\nclock -- --stream clock --interval 1s | \\\nrelay -- --input stdio:///clock --output redis://localhost:6379/clock\n# Stdio -> Kafka\nclock -- --stream clock --interval 1s | \\\nrelay -- --input stdio:///clock --output kafka://localhost:9092/clock\n")),(0,n.yg)("p",null,"\u4ee5\u4e0b\u662f\u5982\u4f55\u5728 Redis \u2194\ufe0f Kafka \u4e4b\u95f4\u4f20\u8f93\u6d41\u7684\u793a\u4f8b\uff1a"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-shell"},"# Redis -> Kafka\nrelay -- --input redis://localhost:6379/clock --output kafka://localhost:9092/clock\n# Kafka -> Redis\nrelay -- --input kafka://localhost:9092/clock --output redis://localhost:6379/clock\n")),(0,n.yg)("p",null,"\u4ee5\u4e0b\u662f\u5982\u4f55 ",(0,n.yg)("em",{parentName:"p"},"\u91cd\u653e")," \u6765\u81ea Kafka / Redis \u7684\u6d41\u7684\u793a\u4f8b\uff1a"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-shell"},"relay -- --input redis://localhost:6379/clock --output stdio:///clock --offset start\nrelay -- --input kafka://localhost:9092/clock --output stdio:///clock --offset start\n")),(0,n.yg)("h2",{id:"stdio-\u6d88\u606f\u683c\u5f0f"},"Stdio \u6d88\u606f\u683c\u5f0f"),(0,n.yg)("p",null,"\u60a8\u53ef\u4ee5\u5c06\u4efb\u4f55\u6709\u6548\u7684 UTF-8 \u5b57\u7b26\u4e32\u5199\u5165 stdin\uff0c\u6bcf\u4e00\u884c\u5c06\u88ab\u89c6\u4e3a\u4e00\u6761\u6d88\u606f\u3002\u6b64\u5916\uff0c\u60a8\u53ef\u4ee5\u4ee5\u7b80\u5355\u7684\u683c\u5f0f\u5199\u5165\u4e00\u4e9b\u6d88\u606f\u5143\u6570\u636e\uff1a"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-log"},"[timestamp | stream_key | sequence | shard_id] payload\n")),(0,n.yg)("p",null,"\u6ce8\u610f\uff1a\u65b9\u62ec\u53f7\u662f\u5b57\u9762\u4e0a\u7684 ",(0,n.yg)("inlineCode",{parentName:"p"},"[")," ",(0,n.yg)("inlineCode",{parentName:"p"},"]"),"\u3002"),(0,n.yg)("p",null,"\u4ee5\u4e0b\u90fd\u662f\u6709\u6548\u7684\uff1a"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-log"},'a plain, raw message\n[2022-01-01T00:00:00] { "payload": "anything" }\n[2022-01-01T00:00:00.123 | my_topic] "a string payload"\n[2022-01-01T00:00:00 | my-topic-2 | 123] ["array", "of", "values"]\n[2022-01-01T00:00:00 | my-topic-2 | 123 | 4] { "payload": "anything" }\n[my_topic] a string payload\n[my_topic | 123] { "payload": "anything" }\n[my_topic | 123 | 4] { "payload": "anything" }\n')),(0,n.yg)("p",null,"\u4ee5\u4e0b\u90fd\u662f\u65e0\u6548\u7684\uff1a"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-log"},'[Jan 1, 2022] { "payload": "anything" }\n[2022-01-01T00:00:00] 12345\n')),(0,n.yg)("p",null,"\u5982\u679c\u6ca1\u6709\u7ed9\u5b9a\u6d41\u952e\uff0c\u5b83\u5c06\u88ab\u5206\u914d\u4e3a ",(0,n.yg)("inlineCode",{parentName:"p"},"broadcast")," \u5e76\u53d1\u9001\u7ed9\u6240\u6709\u6d88\u8d39\u8005\u3002"))}y.isMDXComponent=!0}}]);